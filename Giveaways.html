<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <nav class="navbar"> 
        
        <a href="index.html"> <img src="/Img/Logo-Shoes.png" class="logo"> </a>
          <div class="nav-links">
            <a href="#"> Shop </a>
            <a href="#"> Cart </a>
            <a href="Gallery.html"> Gallery  </a>
            <a href="#"> Contact Us </a>
            <a href="Giveaways.html"> Giveaways </a>
            <div></div>
            <div class="hamburger">
              <span></span>
              <span></span>
              <span></span>
            </div>
        
          </div>
        </nav>

        <br>
        <br>

        <br>




        
    <body>
        
        <table id="t"></table>

        <div class="modal fade" id="gameOverModal" tabindex="-1" aria-labelledby="gameOverModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="gameOverModalLabel"></h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p id="gameResult"></p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Play Again</button>
                </div>
              </div>
            </div>
          </div>
          
    </body>
    <script>

      var empty = 0, you = 1, ai = -1
      function runGame() {
        var field = []
        var table = document.getElementById("t")
        for (var y = 0; y < 3; y++) {
          var tr = document.createElement("tr")
          table.appendChild(tr)
          var row = []
          field.push(row)
          for (var x = 0; x < 3; x++) {
            var td = document.createElement("td")
            td.classList.add("cell")
            td.onclick = playerMove(field, x, y)
            tr.appendChild(td)
            row.push({value: empty, element: td})
          }
        }
      }
      function playerMove(field, x, y) {
        return function() {
          if (!move(field, x, y, you)) return
          wins(field, you) ? gameOver('You won!') : aiMove(field)
          console.log(field)
        }
      }
      function move(field, x, y, who) {
  var e = field[y][x]
  if (e.value != empty) return false
  e.value = who
  e.element.innerHTML = who == you ? 'X' : 'O'
  console.log(field) // Add this line to log the updated field to the console
  return true
}
      function gameOver(msg) {
  var result = document.getElementById("gameResult");
  result.textContent = msg;
  var modal = new bootstrap.Modal(document.getElementById('gameOverModal'), {});
  modal.show();
}

      function wins(f, player) {
        function lineWins(x, y, dx, dy) {
          var a = f[y][x].value, b = f[y+dy][x+dx].value, c = f[y+2*dy][x+2*dx].value
          return a == b && b == c && a == player
        }
        for (var i = 0; i < 3; i++) {
          if (lineWins(0, i, 1, 0) || lineWins(i, 0, 0, 1)) return true
        }
        return lineWins(0, 0, 1, 1) || lineWins(2, 0, -1, 1)
      }
      function validMoves(field) {
        var moves = []
        for (var y = 0; y < 3; y++) {
          for (var x = 0; x < 3; x++) {
            field[y][x].value == empty && moves.push({x:x, y:y})
          }
        }
        return moves;
      }
      function findRandomMove(field) {
        var moves = validMoves(field)
        if (moves.length == 0) return null
        return moves[Math.floor(Math.random()*moves.length)]
      }
      function findBestMove(field, player) {
        if (wins(field, player)) return {score: player}
        if (wins(field, -player)) return {score: -player}
        var moves = validMoves(field)
        if (moves.length == 0) return {score:0}
        var res = []
        for (var i = 0; i < moves.length; i++) {
          var m = moves[i]
          var e = field[m.y][m.x]
          e.value = player
          var r = findBestMove(field, -player)
          r.move = m
          res.push(r)
          e.value = empty
        }
        res.sort(function(a, b) { return (b.score-a.score)*player })
        return res[0]
      }
      function aiMove(field) {
    //    var m = findRandomMove(field)
        var m = findBestMove(field, ai).move
        if (!m) {
          gameOver("Draw!")
          return
        }
        move(field, m.x, m.y, ai)
        wins(field, ai) && gameOver("Computer won!")
      }
      runGame()

      document.getElementById("gameOverModal").addEventListener("click", function() {
  location.reload();
});

      
    </script>
    
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
      }
      /* Navbar css code */
      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background-color: black;
        color: #fff;
      }
      
      .logo {
        width: 50px;
        height: 50px;
      }
      
      .nav-links {
        display: flex;
      }
      
      .nav-links a {
        margin-left: 20px;
        color: white;
        text-decoration: none;
      }
    
      .cell { width: 5em; height: 5em; border: solid; text-align: center; }
      

      #t {
  margin: 0 auto;
  width: 300px;
  height: 300px;
  border: 1px solid black;
  border-collapse: collapse;
}

#t td {
  width: 33%;
  height: 33%;
  text-align: center;
  vertical-align: middle;
  font-size: 50px;
  font-weight: bold;
}

#t tr:nth-child(odd) td:nth-child(even),
#t tr:nth-child(even) td:nth-child(odd) {
  background-color: #000000;
}

/* Centering the button and the alert */
#gameOverModal {
  display: flex;
  align-items: center;
  justify-content: center;
}

#gameOverModal .modal-content {
  width: 300px;
  padding: 20px;
  border-radius: 10px;
  background-color: #979797;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  text-align: center;
}

#gameOverModal h2 {
  font-size: 24px;
  margin-bottom: 20px;
}

#gameOverModal button {
  display: block;
  margin: 0 auto;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  background-color: #0F0;
  color: #fff;
  font-size: 16px;
  cursor: pointer;
}

#gameOverModal button:hover {
  background-color: #090;
}


    </style>
</body>
</html>